{"remainingRequest":"D:\\projectWork\\thirdGrade\\econmic\\mrpSystem\\vue-admin-design\\node_modules\\babel-loader\\lib\\index.js!D:\\projectWork\\thirdGrade\\econmic\\mrpSystem\\vue-admin-design\\node_modules\\cache-loader\\dist\\cjs.js??ref--1-0!D:\\projectWork\\thirdGrade\\econmic\\mrpSystem\\vue-admin-design\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\projectWork\\thirdGrade\\econmic\\mrpSystem\\vue-admin-design\\src\\views\\image\\ImageSynthesizer.vue?vue&type=script&lang=js","dependencies":[{"path":"D:\\projectWork\\thirdGrade\\econmic\\mrpSystem\\vue-admin-design\\src\\views\\image\\ImageSynthesizer.vue","mtime":1728976157742},{"path":"D:\\projectWork\\thirdGrade\\econmic\\mrpSystem\\vue-admin-design\\babel.config.js","mtime":1728976157680},{"path":"D:\\projectWork\\thirdGrade\\econmic\\mrpSystem\\vue-admin-design\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1728977241680},{"path":"D:\\projectWork\\thirdGrade\\econmic\\mrpSystem\\vue-admin-design\\node_modules\\babel-loader\\lib\\index.js","mtime":1728977243261},{"path":"D:\\projectWork\\thirdGrade\\econmic\\mrpSystem\\vue-admin-design\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1728977241680},{"path":"D:\\projectWork\\thirdGrade\\econmic\\mrpSystem\\vue-admin-design\\node_modules\\vue-loader\\lib\\index.js","mtime":1728977244061}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:InVzZSBzdHJpY3QiOwoKdmFyIF9pbnRlcm9wUmVxdWlyZURlZmF1bHQgPSByZXF1aXJlKCJEOi9wcm9qZWN0V29yay90aGlyZEdyYWRlL2Vjb25taWMvbXJwU3lzdGVtL3Z1ZS1hZG1pbi1kZXNpZ24vbm9kZV9tb2R1bGVzL0BiYWJlbC9ydW50aW1lL2hlbHBlcnMvaW50ZXJvcFJlcXVpcmVEZWZhdWx0LmpzIikuZGVmYXVsdDsKT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsICJfX2VzTW9kdWxlIiwgewogIHZhbHVlOiB0cnVlCn0pOwpleHBvcnRzLmRlZmF1bHQgPSB2b2lkIDA7CnJlcXVpcmUoImNvcmUtanMvbW9kdWxlcy9lcy5hcnJheS5wdXNoLmpzIik7CnZhciBfSGludHMgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KHJlcXVpcmUoIkAvY29tcG9uZW50cy9IaW50cyIpKTsKdmFyIF9FbGVtZW50RHJyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChyZXF1aXJlKCJAL2NvbXBvbmVudHMvRWxlbWVudERyciIpKTsKdmFyIF9JbWFnZVJpY2hUZXh0ID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChyZXF1aXJlKCJAL2NvbXBvbmVudHMvSW1hZ2VSaWNoVGV4dCIpKTsKdmFyIF9UZXh0U2V0dGluZyA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQocmVxdWlyZSgiQC9jb21wb25lbnRzL1RleHRTZXR0aW5nIikpOwp2YXIgX1VwbG9hZEltYWdlID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChyZXF1aXJlKCJAL2NvbXBvbmVudHMvVXBsb2FkSW1hZ2UiKSk7CnZhciBfdXRpbHMgPSByZXF1aXJlKCJAL3V0aWxzIik7CnZhciBfZGVmYXVsdCA9IGV4cG9ydHMuZGVmYXVsdCA9IHsKICBuYW1lOiAnSW1hZ2VTeW50aGVzaXplcicsCiAgY29tcG9uZW50czogewogICAgSGludHM6IF9IaW50cy5kZWZhdWx0LAogICAgRWxlbWVudERycjogX0VsZW1lbnREcnIuZGVmYXVsdCwKICAgIEltYWdlUmljaFRleHQ6IF9JbWFnZVJpY2hUZXh0LmRlZmF1bHQsCiAgICBUZXh0U2V0dGluZzogX1RleHRTZXR0aW5nLmRlZmF1bHQsCiAgICBVcGxvYWRJbWFnZTogX1VwbG9hZEltYWdlLmRlZmF1bHQKICB9LAogIGRhdGEoKSB7CiAgICByZXR1cm4gewogICAgICBjb250YWluZXI6IHsKICAgICAgICAvLyDlsZXnpLrljLrvvIjlj6/mi5bmi73ljLrvvInmoLflvI8KICAgICAgICB3aWR0aDogMCwKICAgICAgICBoZWlnaHQ6IDAsCiAgICAgICAgYmdJbWFnZVNyYzogJ2h0dHBzOi8vY2RuLmpzZGVsaXZyLm5ldC9naC9iYWltaW5neHVhbi9tZWRpYS1zdG9yZS9pbWFnZXMvaW1nMDEuanBnJyAvLyDlupXlm77ot6/lvoQKICAgICAgfSwKICAgICAgZWxlbWVudHM6IFtdLAogICAgICAvLyDlj6DliqDnu4Tku7bmlbDnu4QKICAgICAgYWN0aXZlRWxlOiB7fSwKICAgICAgLy8g5b2T5YmN5Zu+54mH5LiK6IGa54Sm55qE5Y+g5Yqg57uE5Lu2CiAgICAgIGVsZU51bTogMAogICAgfTsKICB9LAogIGNvbXB1dGVkOiB7CiAgICAvLyDlsZXnpLrljLrvvIjlj6/mi5bmi73ljLrvvInmoLflvI8KICAgIGNvbnRhaW5lclN0eWxlKCkgewogICAgICByZXR1cm4gewogICAgICAgIHdpZHRoOiB0aGlzLmNvbnRhaW5lci53aWR0aCArICdweCcsCiAgICAgICAgaGVpZ2h0OiB0aGlzLmNvbnRhaW5lci5oZWlnaHQgKyAncHgnLAogICAgICAgIGJhY2tncm91bmRJbWFnZTogJ3VybChcJycgKyB0aGlzLmNvbnRhaW5lci5iZ0ltYWdlU3JjICsgJ1wnKScKICAgICAgfTsKICAgIH0sCiAgICAvLyDpgInmi6nnmoTmlofmnKwKICAgIGFjdGl2ZUVsZVRleHQoKSB7CiAgICAgIGxldCBhY3RpdmUgPSB7fTsKICAgICAgaWYgKHRoaXMuYWN0aXZlRWxlLnR5cGUgPT09ICd0ZXh0JykgewogICAgICAgIGFjdGl2ZSA9IHRoaXMuYWN0aXZlRWxlOwogICAgICB9CiAgICAgIHJldHVybiBhY3RpdmU7CiAgICB9CiAgfSwKICBjcmVhdGVkKCkgewogICAgdGhpcy5nZXREcmFnQ29udGFpbmVyU2l6ZSgxOTIwLCAxMjAwKTsKICAgIHRoaXMuYWRkVGV4dCgpOwogICAgdGhpcy5hZGRJbWFnZSh7CiAgICAgIGFjdGl2ZTogZmFsc2UsCiAgICAgIHNyYzogJ2h0dHBzOi8vY2RuLmpzZGVsaXZyLm5ldC9naC9iYWltaW5neHVhbi9tZWRpYS1zdG9yZS9pbWFnZXMvaW1nMDUuanBlZycsCiAgICAgIHNpemU6IDUzMjQ4LAogICAgICB3aWR0aDogMTMyLAogICAgICBoZWlnaHQ6IDEzMgogICAgfSk7CiAgfSwKICBtZXRob2RzOiB7CiAgICAvLyDmi5bliqjlhYPntKDmiormn4QKICAgIGRyYWdIYW5kbGVzKHR5cGUpIHsKICAgICAgaWYgKHR5cGUgPT09ICd0ZXh0JykgewogICAgICAgIHJldHVybiBbJ2UnLCAndyddOwogICAgICB9CiAgICB9LAogICAgLy8g5YWD57Sg5bGC57qn5o6S5bqPCiAgICBlbGVtZW50WkluZGV4KHR5cGUpIHsKICAgICAgbGV0IHpJbmRleCA9IDE7CiAgICAgIHN3aXRjaCAodHlwZSkgewogICAgICAgIGNhc2UgJ3RleHQnOgogICAgICAgICAgekluZGV4ID0gMzsKICAgICAgICAgIGJyZWFrOwogICAgICAgIGNhc2UgJ2ltYWdlJzoKICAgICAgICAgIHpJbmRleCA9IDI7CiAgICAgICAgICBicmVhazsKICAgICAgfQogICAgICByZXR1cm4gewogICAgICAgIHpJbmRleDogekluZGV4CiAgICAgIH07CiAgICB9LAogICAgLy8g5bqV5Zu+5LiK5Lyg5oiQ5YqfCiAgICBoYW5kbGVTdWNjZXNzKGRhdGEpIHsKICAgICAgdGhpcy5jb250YWluZXIuYmdJbWFnZVNyYyA9IGRhdGE7CiAgICAgIGNvbnN0IGltYWdlID0gbmV3IEltYWdlKCk7CiAgICAgIGltYWdlLnNyYyA9IGRhdGE7CiAgICAgIGltYWdlLm9ubG9hZCA9ICgpID0+IHsKICAgICAgICB0aGlzLmdldERyYWdDb250YWluZXJTaXplKGltYWdlLndpZHRoLCBpbWFnZS5oZWlnaHQpOwogICAgICB9OwogICAgfSwKICAgIC8vIOiuoeeul+W6leWbvuWxleekuuWuvemrmAogICAgZ2V0RHJhZ0NvbnRhaW5lclNpemUoaW1hZ2VXLCBpbWFnZUgpIHsKICAgICAgY29uc3QgW3Nob3dBcmVhVywgc2hvd0FyZWFIXSA9IFs4NTAsIDU1MF07CiAgICAgIGNvbnN0IHNpemVPYmogPSAoMCwgX3V0aWxzLmNhbGNJbWFnZVNpemUpKGltYWdlVywgaW1hZ2VILCBzaG93QXJlYVcsIHNob3dBcmVhSCk7CiAgICAgIC8vIOabtOaWsOWbvueJh+WxleekuuWMuuWuvemrmAogICAgICB0aGlzLmNvbnRhaW5lci53aWR0aCA9IHNpemVPYmoud2lkdGg7CiAgICAgIHRoaXMuY29udGFpbmVyLmhlaWdodCA9IHNpemVPYmouaGVpZ2h0OwogICAgfSwKICAgIC8vIOa3u+WKoOaWh+acrAogICAgYWRkVGV4dCgpIHsKICAgICAgY29uc3QgdGFnTnVtID0gKyt0aGlzLmVsZU51bTsKICAgICAgY29uc3QgdGV4dCA9IHsKICAgICAgICBhY3RpdmU6IHRydWUsCiAgICAgICAgdGV4dDogJ+ivt+i+k+WFpeaWh+acrCcsCiAgICAgICAgdHlwZTogJ3RleHQnLAogICAgICAgIHRhZzogJ3RleHRfJyArIHRhZ051bSwKICAgICAgICB4OiAzMDAsCiAgICAgICAgeTogMTAwLAogICAgICAgIHc6IDE4MCwKICAgICAgICBoOiAzNiwKICAgICAgICBzdHlsZTogewogICAgICAgICAgdGV4dEFsaWduOiAnbGVmdCcsCiAgICAgICAgICBsaW5lSGVpZ2h0OiAnMjRweCcsCiAgICAgICAgICBmb250U2l6ZTogJzI0cHgnLAogICAgICAgICAgZm9udEZhbWlseTogJ+W+rui9r+m7keS9kycsCiAgICAgICAgICBmb250V2VpZ2h0OiA0MDAsCiAgICAgICAgICBjb2xvcjogJyNmNzA3MDcnLAogICAgICAgICAgYmFja2dyb3VuZENvbG9yOiAnIzA1ZjhlOCcsCiAgICAgICAgICBvdmVyZmxvdzogJ2hpZGRlbicKICAgICAgICB9CiAgICAgIH07CiAgICAgIGlmICh0aGlzLmVsZW1lbnRzLmxlbmd0aCA+IDQpIHsKICAgICAgICB0aGlzLiRtZXNzYWdlLndhcm5pbmcoJ+WbvueJh+S4iuacgOWkmuWPoOWKoDXkuKrlhYPntKDvvIEnKTsKICAgICAgfSBlbHNlIHsKICAgICAgICB0aGlzLmVsZW1lbnRzLnB1c2godGV4dCk7CiAgICAgICAgdGhpcy51cGRhdGVBY3RpdmVFbGUodGV4dCk7CiAgICAgIH0KICAgIH0sCiAgICAvLyDmt7vliqDlm77niYcKICAgIGFkZEltYWdlKGltZ09iaikgewogICAgICBjb25zdCB0YWdOdW0gPSArK3RoaXMuZWxlTnVtOwogICAgICBjb25zdCBpbWFnZSA9IHsKICAgICAgICBhY3RpdmU6IGltZ09iai5hY3RpdmUsCiAgICAgICAgdHlwZTogJ2ltYWdlJywKICAgICAgICB0YWc6ICdpbWFnZV8nICsgdGFnTnVtLAogICAgICAgIHg6IDMyMCwKICAgICAgICB5OiAzMDAsCiAgICAgICAgdzogcGFyc2VJbnQoaW1nT2JqLndpZHRoKSwKICAgICAgICBoOiBwYXJzZUludChpbWdPYmouaGVpZ2h0KSwKICAgICAgICBzcmM6IGltZ09iai5zcmMsCiAgICAgICAgc2l6ZTogaW1nT2JqLnNpemUKICAgICAgfTsKICAgICAgaWYgKHRoaXMuZWxlbWVudHMubGVuZ3RoID4gNCkgewogICAgICAgIHRoaXMuJG1lc3NhZ2Uud2FybmluZygn5Zu+54mH5LiK5pyA5aSa5Y+g5YqgNeS4quWFg+e0oO+8gScpOwogICAgICB9IGVsc2UgewogICAgICAgIHRoaXMuZWxlbWVudHMucHVzaChpbWFnZSk7CiAgICAgICAgaWYgKGltZ09iai5hY3RpdmUpIHsKICAgICAgICAgIHRoaXMudXBkYXRlQWN0aXZlRWxlKGltYWdlKTsKICAgICAgICB9CiAgICAgIH0KICAgIH0sCiAgICAvLyDkuIrkvKDlm77niYfmiJDlip8KICAgIGhhbmRsZUFkZEltYWdlKGRhdGEpIHsKICAgICAgY29uc3QgZGF0YVN0ckxlbiA9IGRhdGEucmVwbGFjZSgnZGF0YTppbWFnZS9qcGVnO2Jhc2U2NCwnLCAnJykubGVuZ3RoOwogICAgICBjb25zdCBkYXRhU2l6ZSA9IHBhcnNlSW50KGRhdGFTdHJMZW4gLSBkYXRhU3RyTGVuIC8gOCAqIDIpOwogICAgICBjb25zdCBpbWcgPSBuZXcgSW1hZ2UoKTsKICAgICAgaW1nLnNyYyA9IGRhdGE7CiAgICAgIGltZy5vbmxvYWQgPSAoKSA9PiB7CiAgICAgICAgY29uc3QgaW1hZ2VTaXplID0gKDAsIF91dGlscy5jYWxjSW1hZ2VTaXplKShpbWcud2lkdGgsIGltZy5oZWlnaHQsIHBhcnNlSW50KHRoaXMuY29udGFpbmVyLndpZHRoIC8gNCksIHBhcnNlSW50KHRoaXMuY29udGFpbmVyLmhlaWdodCAvIDQpKTsKICAgICAgICB0aGlzLmFkZEltYWdlKHsKICAgICAgICAgIGFjdGl2ZTogdHJ1ZSwKICAgICAgICAgIHNyYzogZGF0YSwKICAgICAgICAgIHNpemU6IGRhdGFTaXplLAogICAgICAgICAgd2lkdGg6IGltYWdlU2l6ZS53aWR0aCwKICAgICAgICAgIGhlaWdodDogaW1hZ2VTaXplLmhlaWdodAogICAgICAgIH0pOwogICAgICB9OwogICAgfSwKICAgIC8vIOabtOaWsOW9k+WJjemAieS4reeahOWFg+e0oAogICAgdXBkYXRlQWN0aXZlRWxlKGVsZW1lbnQpIHsKICAgICAgdGhpcy5hY3RpdmVFbGUgPSBlbGVtZW50OwogICAgfSwKICAgIC8vIOWIoOmZpOWbvueJh+S4iuW9k+WJjemAieaLqeeahOWFg+e0oAogICAgZGVsZXRlQWN0aXZlRWxlKCkgewogICAgICBjb25zdCBuZXdFbGVtZW50cyA9IHRoaXMuZWxlbWVudHMuZmlsdGVyKGl0ZW0gPT4gewogICAgICAgIHJldHVybiBpdGVtLnRhZyAhPT0gdGhpcy5hY3RpdmVFbGUudGFnOwogICAgICB9KTsKICAgICAgdGhpcy4kbmV4dFRpY2soKCkgPT4gewogICAgICAgIHRoaXMuZWxlbWVudHMgPSBuZXdFbGVtZW50czsKICAgICAgfSk7CiAgICAgIHRoaXMudXBkYXRlQWN0aXZlRWxlKHt9KTsKICAgIH0KICB9Cn07"},{"version":3,"names":["_Hints","_interopRequireDefault","require","_ElementDrr","_ImageRichText","_TextSetting","_UploadImage","_utils","_default","exports","default","name","components","Hints","ElementDrr","ImageRichText","TextSetting","UploadImage","data","container","width","height","bgImageSrc","elements","activeEle","eleNum","computed","containerStyle","backgroundImage","activeEleText","active","type","created","getDragContainerSize","addText","addImage","src","size","methods","dragHandles","elementZIndex","zIndex","handleSuccess","image","Image","onload","imageW","imageH","showAreaW","showAreaH","sizeObj","calcImageSize","tagNum","text","tag","x","y","w","h","style","textAlign","lineHeight","fontSize","fontFamily","fontWeight","color","backgroundColor","overflow","length","$message","warning","push","updateActiveEle","imgObj","parseInt","handleAddImage","dataStrLen","replace","dataSize","img","imageSize","element","deleteActiveEle","newElements","filter","item","$nextTick"],"sources":["src/views/image/ImageSynthesizer.vue"],"sourcesContent":["<template>\r\n  <div class=\"image-synthesizer\">\r\n    <Hints>\r\n      <template slot=\"hintName\">图片合成</template>\r\n      <template slot=\"hintInfo\">\r\n        <p>基于VueDRR拖拽功能，在其上通过叠加图片、文字等，实现图片的叠加伪合成功能</p>\r\n        <p>VueDRR：基于vue-draggable-resizable的vue组件，可以实现拖动、拉伸和旋转功能</p>\r\n      </template>\r\n    </Hints>\r\n    <el-row :gutter=\"20\">\r\n      <el-col :span=\"16\">\r\n        <el-card shadow=\"always\">\r\n          <div slot=\"header\" class=\"title\">合成区域</div>\r\n          <div class=\"box-wrapper\">\r\n            <div class=\"drag-container\" :style=\"containerStyle\">\r\n              <ElementDrr\r\n                v-for=\"(item, index) in elements\"\r\n                :key=\"index\"\r\n                :element=\"item\"\r\n                :handles=\"dragHandles(item.type)\"\r\n                :style=\"elementZIndex(item.type)\"\r\n                @updateActiveEle=\"updateActiveEle\"\r\n              >\r\n                <!-- 图片 -->\r\n                <img v-if=\"item.type==='image'\" :src=\"item.src\" draggable=\"false\">\r\n                <!-- 文字 -->\r\n                <ImageRichText v-if=\"item.type === 'text'\" v-model=\"item.text\" :element=\"item\" :active-ele-text=\"activeEleText\" />\r\n              </ElementDrr>\r\n            </div>\r\n          </div>\r\n        </el-card>\r\n      </el-col>\r\n      <el-col :span=\"8\">\r\n        <el-card shadow=\"always\">\r\n          <div slot=\"header\" class=\"title\">设置区域</div>\r\n          <div class=\"box-content\">\r\n            <el-form class=\"form-wrapper\" label-width=\"70px\">\r\n              <el-form-item label=\"选择底图\">\r\n                <UploadImage btn-name=\"选择底图\" @on-success=\"handleSuccess\" />\r\n              </el-form-item>\r\n              <el-form-item label=\"添加文本\">\r\n                <el-button @click=\"addText\">添加文本</el-button>\r\n              </el-form-item>\r\n              <el-form-item label=\"添加图片\">\r\n                <UploadImage @on-success=\"handleAddImage\" />\r\n              </el-form-item>\r\n              <el-form-item label=\"删除元素\">\r\n                <el-button type=\"danger\" @click=\"deleteActiveEle\">删除元素</el-button>\r\n              </el-form-item>\r\n            </el-form>\r\n            <TextSetting v-if=\"activeEle.type === 'text'\" :active-ele-text=\"activeEleText\" />\r\n          </div>\r\n        </el-card>\r\n      </el-col>\r\n    </el-row>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport Hints from '@/components/Hints'\r\nimport ElementDrr from '@/components/ElementDrr'\r\nimport ImageRichText from '@/components/ImageRichText'\r\nimport TextSetting from '@/components/TextSetting'\r\nimport UploadImage from '@/components/UploadImage'\r\nimport { calcImageSize } from '@/utils'\r\n\r\nexport default {\r\n  name: 'ImageSynthesizer',\r\n  components: { Hints, ElementDrr, ImageRichText, TextSetting, UploadImage },\r\n  data() {\r\n    return {\r\n      container: { // 展示区（可拖拽区）样式\r\n        width: 0,\r\n        height: 0,\r\n        bgImageSrc: 'https://cdn.jsdelivr.net/gh/baimingxuan/media-store/images/img01.jpg' // 底图路径\r\n      },\r\n      elements: [], // 叠加组件数组\r\n      activeEle: {}, // 当前图片上聚焦的叠加组件\r\n      eleNum: 0\r\n    }\r\n  },\r\n  computed: {\r\n    // 展示区（可拖拽区）样式\r\n    containerStyle() {\r\n      return {\r\n        width: this.container.width + 'px',\r\n        height: this.container.height + 'px',\r\n        backgroundImage: 'url(\\'' + this.container.bgImageSrc + '\\')'\r\n      }\r\n    },\r\n    // 选择的文本\r\n    activeEleText() {\r\n      let active = {}\r\n      if (this.activeEle.type === 'text') {\r\n        active = this.activeEle\r\n      }\r\n      return active\r\n    }\r\n  },\r\n  created() {\r\n    this.getDragContainerSize(1920, 1200)\r\n    this.addText()\r\n    this.addImage({\r\n      active: false,\r\n      src: 'https://cdn.jsdelivr.net/gh/baimingxuan/media-store/images/img05.jpeg',\r\n      size: 53248,\r\n      width: 132,\r\n      height: 132\r\n    })\r\n  },\r\n  methods: {\r\n    // 拖动元素把柄\r\n    dragHandles(type) {\r\n      if (type === 'text') {\r\n        return ['e', 'w']\r\n      }\r\n    },\r\n    // 元素层级排序\r\n    elementZIndex(type) {\r\n      let zIndex = 1\r\n      switch (type) {\r\n        case 'text':\r\n          zIndex = 3\r\n          break\r\n        case 'image':\r\n          zIndex = 2\r\n          break\r\n      }\r\n      return {\r\n        zIndex: zIndex\r\n      }\r\n    },\r\n    // 底图上传成功\r\n    handleSuccess(data) {\r\n      this.container.bgImageSrc = data\r\n      const image = new Image()\r\n      image.src = data\r\n      image.onload = () => {\r\n        this.getDragContainerSize(image.width, image.height)\r\n      }\r\n    },\r\n    // 计算底图展示宽高\r\n    getDragContainerSize(imageW, imageH) {\r\n      const [showAreaW, showAreaH] = [850, 550]\r\n      const sizeObj = calcImageSize(imageW, imageH, showAreaW, showAreaH)\r\n      // 更新图片展示区宽高\r\n      this.container.width = sizeObj.width\r\n      this.container.height = sizeObj.height\r\n    },\r\n    // 添加文本\r\n    addText() {\r\n      const tagNum = ++this.eleNum\r\n      const text = {\r\n        active: true,\r\n        text: '请输入文本',\r\n        type: 'text',\r\n        tag: 'text_' + tagNum,\r\n        x: 300,\r\n        y: 100,\r\n        w: 180,\r\n        h: 36,\r\n        style: {\r\n          textAlign: 'left',\r\n          lineHeight: '24px',\r\n          fontSize: '24px',\r\n          fontFamily: '微软黑体',\r\n          fontWeight: 400,\r\n          color: '#f70707',\r\n          backgroundColor: '#05f8e8',\r\n          overflow: 'hidden'\r\n        }\r\n      }\r\n      if (this.elements.length > 4) {\r\n        this.$message.warning('图片上最多叠加5个元素！')\r\n      } else {\r\n        this.elements.push(text)\r\n        this.updateActiveEle(text)\r\n      }\r\n    },\r\n    // 添加图片\r\n    addImage(imgObj) {\r\n      const tagNum = ++this.eleNum\r\n      const image = {\r\n        active: imgObj.active,\r\n        type: 'image',\r\n        tag: 'image_' + tagNum,\r\n        x: 320,\r\n        y: 300,\r\n        w: parseInt(imgObj.width),\r\n        h: parseInt(imgObj.height),\r\n        src: imgObj.src,\r\n        size: imgObj.size\r\n      }\r\n      if (this.elements.length > 4) {\r\n        this.$message.warning('图片上最多叠加5个元素！')\r\n      } else {\r\n        this.elements.push(image)\r\n        if (imgObj.active) {\r\n          this.updateActiveEle(image)\r\n        }\r\n      }\r\n    },\r\n    // 上传图片成功\r\n    handleAddImage(data) {\r\n      const dataStrLen = data.replace('data:image/jpeg;base64,', '').length\r\n      const dataSize = parseInt(dataStrLen - (dataStrLen / 8) * 2)\r\n      const img = new Image()\r\n      img.src = data\r\n      img.onload = () => {\r\n        const imageSize = calcImageSize(img.width, img.height, parseInt(this.container.width / 4), parseInt(this.container.height / 4))\r\n        this.addImage({\r\n          active: true,\r\n          src: data,\r\n          size: dataSize,\r\n          width: imageSize.width,\r\n          height: imageSize.height\r\n        })\r\n      }\r\n    },\r\n    // 更新当前选中的元素\r\n    updateActiveEle(element) {\r\n      this.activeEle = element\r\n    },\r\n    // 删除图片上当前选择的元素\r\n    deleteActiveEle() {\r\n      const newElements = this.elements.filter(item => {\r\n        return item.tag !== this.activeEle.tag\r\n      })\r\n      this.$nextTick(() => {\r\n        this.elements = newElements\r\n      })\r\n      this.updateActiveEle({})\r\n    }\r\n  }\r\n}\r\n</script>\r\n\r\n<style lang=\"less\">\r\n.image-synthesizer {\r\n  .box-wrapper {\r\n    display: flex;\r\n    align-items: center;\r\n    justify-content: center;\r\n    height: 550px;\r\n    overflow: hidden;\r\n    .drag-container {\r\n      position: relative;\r\n      background-size: contain;\r\n      background-position: center;\r\n      background-repeat: no-repeat;\r\n      .z-drr-container {\r\n        border: 1px dashed transparent;\r\n        &.z-active {\r\n          border: 1px dashed #2e95ff;\r\n        }\r\n      }\r\n    }\r\n  }\r\n  .box-content {\r\n    height: 550px;\r\n    overflow: hidden;\r\n    .form-wrapper {\r\n      width: 300px;\r\n      margin: 15px auto 0;\r\n    }\r\n    .el-button {\r\n      width: 210px;\r\n    }\r\n  }\r\n}\r\n</style>\r\n"],"mappings":"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","ignoreList":[]}]}