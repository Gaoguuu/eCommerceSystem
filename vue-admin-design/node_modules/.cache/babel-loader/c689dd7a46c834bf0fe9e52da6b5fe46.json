{"remainingRequest":"D:\\projectWork\\thirdGrade\\econmic\\mrpSystem\\vue-admin-design\\node_modules\\babel-loader\\lib\\index.js!D:\\projectWork\\thirdGrade\\econmic\\mrpSystem\\vue-admin-design\\node_modules\\cache-loader\\dist\\cjs.js??ref--1-0!D:\\projectWork\\thirdGrade\\econmic\\mrpSystem\\vue-admin-design\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\projectWork\\thirdGrade\\econmic\\mrpSystem\\vue-admin-design\\src\\views\\image\\ImageCompress.vue?vue&type=script&lang=js","dependencies":[{"path":"D:\\projectWork\\thirdGrade\\econmic\\mrpSystem\\vue-admin-design\\src\\views\\image\\ImageCompress.vue","mtime":1728976157741},{"path":"D:\\projectWork\\thirdGrade\\econmic\\mrpSystem\\vue-admin-design\\babel.config.js","mtime":1728976157680},{"path":"D:\\projectWork\\thirdGrade\\econmic\\mrpSystem\\vue-admin-design\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1728977241680},{"path":"D:\\projectWork\\thirdGrade\\econmic\\mrpSystem\\vue-admin-design\\node_modules\\babel-loader\\lib\\index.js","mtime":1728977243261},{"path":"D:\\projectWork\\thirdGrade\\econmic\\mrpSystem\\vue-admin-design\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1728977241680},{"path":"D:\\projectWork\\thirdGrade\\econmic\\mrpSystem\\vue-admin-design\\node_modules\\vue-loader\\lib\\index.js","mtime":1728977244061}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:InVzZSBzdHJpY3QiOwoKdmFyIF9pbnRlcm9wUmVxdWlyZURlZmF1bHQgPSByZXF1aXJlKCJEOi9wcm9qZWN0V29yay90aGlyZEdyYWRlL2Vjb25taWMvbXJwU3lzdGVtL3Z1ZS1hZG1pbi1kZXNpZ24vbm9kZV9tb2R1bGVzL0BiYWJlbC9ydW50aW1lL2hlbHBlcnMvaW50ZXJvcFJlcXVpcmVEZWZhdWx0LmpzIikuZGVmYXVsdDsKT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsICJfX2VzTW9kdWxlIiwgewogIHZhbHVlOiB0cnVlCn0pOwpleHBvcnRzLmRlZmF1bHQgPSB2b2lkIDA7CnJlcXVpcmUoImNvcmUtanMvbW9kdWxlcy93ZWIudXJsLXNlYXJjaC1wYXJhbXMuZGVsZXRlLmpzIik7CnJlcXVpcmUoImNvcmUtanMvbW9kdWxlcy93ZWIudXJsLXNlYXJjaC1wYXJhbXMuaGFzLmpzIik7CnJlcXVpcmUoImNvcmUtanMvbW9kdWxlcy93ZWIudXJsLXNlYXJjaC1wYXJhbXMuc2l6ZS5qcyIpOwp2YXIgX0hpbnRzID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChyZXF1aXJlKCJAL2NvbXBvbmVudHMvSGludHMiKSk7CnZhciBfVXBsb2FkSW1hZ2UgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KHJlcXVpcmUoIkAvY29tcG9uZW50cy9VcGxvYWRJbWFnZSIpKTsKdmFyIF91dGlscyA9IHJlcXVpcmUoIkAvdXRpbHMiKTsKY29uc3QgcXVhbGl0eU9wdGlvbnMgPSBbewogIGxhYmVsOiAxMDAsCiAgdmFsdWU6IDEKfSwgewogIGxhYmVsOiA5MCwKICB2YWx1ZTogMC45Cn0sIHsKICBsYWJlbDogODAsCiAgdmFsdWU6IDAuOAp9LCB7CiAgbGFiZWw6IDcwLAogIHZhbHVlOiAwLjcKfSwgewogIGxhYmVsOiA2MCwKICB2YWx1ZTogMC42Cn0sIHsKICBsYWJlbDogNTAsCiAgdmFsdWU6IDAuNQp9XTsKdmFyIF9kZWZhdWx0ID0gZXhwb3J0cy5kZWZhdWx0ID0gewogIG5hbWU6ICdJbWFnZUNvbXByZXNzJywKICBjb21wb25lbnRzOiB7CiAgICBIaW50czogX0hpbnRzLmRlZmF1bHQsCiAgICBVcGxvYWRJbWFnZTogX1VwbG9hZEltYWdlLmRlZmF1bHQKICB9LAogIGRhdGEoKSB7CiAgICByZXR1cm4gewogICAgICAvLyDlm77niYflr7nosaEKICAgICAgaW1hZ2U6IHsKICAgICAgICB3aWR0aDogMTkyMCwKICAgICAgICBoZWlnaHQ6IDEwODAsCiAgICAgICAgc3JjOiAnaHR0cHM6Ly9jZG4uanNkZWxpdnIubmV0L2doL2JhaW1pbmd4dWFuL21lZGlhLXN0b3JlL2ltYWdlcy9pbWcwMy5qcGcnCiAgICAgIH0sCiAgICAgIC8vIOWbvueJh+aYvuekuuWvueixoQogICAgICBpbWFnZVNob3c6IHsKICAgICAgICB3aWR0aDogMCwKICAgICAgICBoZWlnaHQ6IDAsCiAgICAgICAgaW1nU3JjOiAnJwogICAgICB9LAogICAgICAvLyDlm77niYfljovnvKnnmoTlgLzlr7nosaEKICAgICAgaW1hZ2VPYmo6IHsKICAgICAgICB3aWR0aDogMCwKICAgICAgICBoZWlnaHQ6IDAsCiAgICAgICAgcmF0aW86IDEwMCArICclJywKICAgICAgICBxdWFsaXR5OiAxCiAgICAgIH0sCiAgICAgIHF1YWxpdHlPcHRpb25zCiAgICB9OwogIH0sCiAgY29tcHV0ZWQ6IHsKICAgIC8vIOWbvueJh+aYvuekuuWMuuagt+W8jwogICAgaW1hZ2VTdHlsZSgpIHsKICAgICAgcmV0dXJuIHsKICAgICAgICB3aWR0aDogdGhpcy5pbWFnZVNob3cud2lkdGggKyAncHgnLAogICAgICAgIGhlaWdodDogdGhpcy5pbWFnZVNob3cuaGVpZ2h0ICsgJ3B4JywKICAgICAgICBiYWNrZ3JvdW5kSW1hZ2U6ICd1cmwoXCcnICsgdGhpcy5pbWFnZVNob3cuaW1nU3JjICsgJ1wnKScKICAgICAgfTsKICAgIH0sCiAgICAvLyDlm77niYflrr3pq5jmr5TnjocKICAgIGltYWdlUmF0aW8oKSB7CiAgICAgIHJldHVybiB0aGlzLmltYWdlLndpZHRoIC8gdGhpcy5pbWFnZS5oZWlnaHQ7CiAgICB9CiAgfSwKICB3YXRjaDogewogICAgaW1hZ2U6IHsKICAgICAgaGFuZGxlcih2YWwpIHsKICAgICAgICB0aGlzLmdldERyYWdDb250YWluZXJTaXplKHZhbC53aWR0aCwgdmFsLmhlaWdodCk7CiAgICAgICAgdGhpcy5pbWFnZVNob3cuaW1nU3JjID0gdmFsLnNyYzsKICAgICAgICB0aGlzLmltYWdlT2JqLndpZHRoID0gdmFsLndpZHRoOwogICAgICAgIHRoaXMuaW1hZ2VPYmouaGVpZ2h0ID0gdmFsLmhlaWdodDsKICAgICAgICB0aGlzLmltYWdlT2JqLnJhdGlvID0gMTAwICsgJyUnOwogICAgICAgIHRoaXMuaW1hZ2VPYmoucXVhbGl0eSA9IDE7CiAgICAgIH0sCiAgICAgIGRlZXA6IHRydWUKICAgIH0KICB9LAogIGNyZWF0ZWQoKSB7CiAgICB0aGlzLmdldERyYWdDb250YWluZXJTaXplKHRoaXMuaW1hZ2Uud2lkdGgsIHRoaXMuaW1hZ2UuaGVpZ2h0KTsKICAgIHRoaXMuaW1hZ2VTaG93LmltZ1NyYyA9IHRoaXMuaW1hZ2Uuc3JjOwogICAgdGhpcy5pbWFnZU9iai53aWR0aCA9IHRoaXMuaW1hZ2Uud2lkdGg7CiAgICB0aGlzLmltYWdlT2JqLmhlaWdodCA9IHRoaXMuaW1hZ2UuaGVpZ2h0OwogIH0sCiAgbWV0aG9kczogewogICAgLy8g6L6T5YWl5a696auY5YWz6IGUCiAgICBiaW5kSW5wdXQodHlwZSkgewogICAgICBpZiAodHlwZSA9PT0gJ2gnKSB7CiAgICAgICAgdGhpcy5pbWFnZU9iai5oZWlnaHQgPSBNYXRoLnJvdW5kKHRoaXMuaW1hZ2VPYmoud2lkdGggLyB0aGlzLmltYWdlUmF0aW8pLnRvRml4ZWQoMCk7CiAgICAgIH0gZWxzZSBpZiAodHlwZSA9PT0gJ3cnKSB7CiAgICAgICAgdGhpcy5pbWFnZU9iai53aWR0aCA9IE1hdGgucm91bmQodGhpcy5pbWFnZU9iai5oZWlnaHQgKiB0aGlzLmltYWdlUmF0aW8pLnRvRml4ZWQoMCk7CiAgICAgIH0KICAgICAgdGhpcy5pbWFnZU9iai5yYXRpbyA9ICh0aGlzLmltYWdlT2JqLndpZHRoIC8gdGhpcy5pbWFnZS53aWR0aCAqIDEwMCkudG9GaXhlZCgyKSArICclJzsKICAgIH0sCiAgICAvLyDorqHnrpflm77niYfmmL7npLrlrr3pq5gKICAgIGdldERyYWdDb250YWluZXJTaXplKGltYWdlVywgaW1hZ2VIKSB7CiAgICAgIGNvbnN0IFtzaG93QXJlYVcsIHNob3dBcmVhSF0gPSBbODUwLCA1NTBdOwogICAgICBjb25zdCBzaXplT2JqID0gKDAsIF91dGlscy5jYWxjSW1hZ2VTaXplKShpbWFnZVcsIGltYWdlSCwgc2hvd0FyZWFXLCBzaG93QXJlYUgpOwogICAgICAvLyDmm7TmlrDlm77niYflsZXnpLrljLrlrr3pq5gKICAgICAgdGhpcy5pbWFnZVNob3cud2lkdGggPSBzaXplT2JqLndpZHRoOwogICAgICB0aGlzLmltYWdlU2hvdy5oZWlnaHQgPSBzaXplT2JqLmhlaWdodDsKICAgIH0sCiAgICBoYW5kbGVTdWNjZXNzKGRhdGEpIHsKICAgICAgdGhpcy5pbWFnZS5zcmMgPSBkYXRhOwogICAgICBjb25zdCBpbWFnZSA9IG5ldyBJbWFnZSgpOwogICAgICBpbWFnZS5zcmMgPSBkYXRhOwogICAgICBpbWFnZS5vbmxvYWQgPSAoKSA9PiB7CiAgICAgICAgdGhpcy5pbWFnZS53aWR0aCA9IGltYWdlLndpZHRoOwogICAgICAgIHRoaXMuaW1hZ2UuaGVpZ2h0ID0gaW1hZ2UuaGVpZ2h0OwogICAgICB9OwogICAgfSwKICAgIC8vIOWbvueJh+WOi+e8qQogICAgY29tcHJlc3NJbWFnZSgpIHsKICAgICAgY29uc3Qgd2lkdGggPSB0aGlzLmltYWdlT2JqLndpZHRoOwogICAgICBjb25zdCBoZWlnaHQgPSB0aGlzLmltYWdlT2JqLmhlaWdodDsKICAgICAgY29uc3QgcXVhbGl0eSA9IHRoaXMuaW1hZ2VPYmoucXVhbGl0eTsKICAgICAgY29uc3QgaW1nID0gbmV3IEltYWdlKCk7CiAgICAgIGltZy5zcmMgPSB0aGlzLmltYWdlLnNyYzsKICAgICAgaW1nLm9ubG9hZCA9ICgpID0+IHsKICAgICAgICAvLyDliJvlu7pjYW52YXMKICAgICAgICBjb25zdCBjYW52YXMgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdjYW52YXMnKTsKICAgICAgICBjb25zdCBjdHggPSBjYW52YXMuZ2V0Q29udGV4dCgnMmQnKTsKICAgICAgICAvLyDliJvlu7rlsZ7mgKfoioLngrkKICAgICAgICBjb25zdCBhbncgPSBkb2N1bWVudC5jcmVhdGVBdHRyaWJ1dGUoJ3dpZHRoJyk7CiAgICAgICAgYW53Lm5vZGVWYWx1ZSA9IHdpZHRoOwogICAgICAgIGNvbnN0IGFuaCA9IGRvY3VtZW50LmNyZWF0ZUF0dHJpYnV0ZSgnaGVpZ2h0Jyk7CiAgICAgICAgYW5oLm5vZGVWYWx1ZSA9IGhlaWdodDsKICAgICAgICBjYW52YXMuc2V0QXR0cmlidXRlTm9kZShhbncpOwogICAgICAgIGNhbnZhcy5zZXRBdHRyaWJ1dGVOb2RlKGFuaCk7CiAgICAgICAgLy8g57uY5Yi25Zu+54mHCiAgICAgICAgY3R4LmZpbGxSZWN0KDAsIDAsIHdpZHRoLCBoZWlnaHQpOwogICAgICAgIGN0eC5kcmF3SW1hZ2UoaW1nLCAwLCAwLCB3aWR0aCwgaGVpZ2h0KTsKICAgICAgICAvLyDnlJ/miJBiYXNlNjTlm77niYcKICAgICAgICBjb25zdCBpbWFnZUJhc2U2NCA9IGNhbnZhcy50b0RhdGFVUkwoJ2ltYWdlL3BuZycsIHF1YWxpdHkpOwogICAgICAgIHRoaXMuZG93bmxvYWRJbWFnZShpbWFnZUJhc2U2NCk7CiAgICAgIH07CiAgICB9LAogICAgLy8g5LiL6L295Y6L57yp55qE5Zu+54mHCiAgICBkb3dubG9hZEltYWdlKGltYWdlQmFzZTY0KSB7CiAgICAgIGNvbnN0IGltYWdlQmxvYiA9ICgwLCBfdXRpbHMuYmFzZTY0dG9CbG9iKShpbWFnZUJhc2U2NCk7CiAgICAgIGNvbnN0IGxpbmsgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdhJyk7CiAgICAgIGNvbnN0IGV2ZW50ID0gZG9jdW1lbnQuY3JlYXRlRXZlbnQoJ0hUTUxFdmVudHMnKTsKICAgICAgLy8gaW5pdEV2ZW50IOS4jeWKoOWQjuS4pOS4quWPguaVsOS8muWcqOeBq+eLkOS4i+aKpemUmSDkuovku7bnsbvlnovvvIzmmK/lkKblhpLms6HvvIzmmK/lkKbpmLvmraLmtY/op4jlmajnmoTpu5jorqTooYzkuLoKICAgICAgZXZlbnQuaW5pdEV2ZW50KCdjbGljaycsIHRydWUsIHRydWUpOwogICAgICBsaW5rLmRvd25sb2FkID0gJ2ltYWdlLnBuZyc7CiAgICAgIGxpbmsuaHJlZiA9IFVSTC5jcmVhdGVPYmplY3RVUkwoaW1hZ2VCbG9iKTsKICAgICAgLy8g5YW85a6554Gr54uQCiAgICAgIGxpbmsuZGlzcGF0Y2hFdmVudChuZXcgTW91c2VFdmVudCgnY2xpY2snLCB7CiAgICAgICAgYnViYmxlczogdHJ1ZSwKICAgICAgICBjYW5jZWxhYmxlOiB0cnVlLAogICAgICAgIHZpZXc6IHdpbmRvdwogICAgICB9KSk7CiAgICB9CiAgfQp9Ow=="},{"version":3,"names":["_Hints","_interopRequireDefault","require","_UploadImage","_utils","qualityOptions","label","value","_default","exports","default","name","components","Hints","UploadImage","data","image","width","height","src","imageShow","imgSrc","imageObj","ratio","quality","computed","imageStyle","backgroundImage","imageRatio","watch","handler","val","getDragContainerSize","deep","created","methods","bindInput","type","Math","round","toFixed","imageW","imageH","showAreaW","showAreaH","sizeObj","calcImageSize","handleSuccess","Image","onload","compressImage","img","canvas","document","createElement","ctx","getContext","anw","createAttribute","nodeValue","anh","setAttributeNode","fillRect","drawImage","imageBase64","toDataURL","downloadImage","imageBlob","base64toBlob","link","event","createEvent","initEvent","download","href","URL","createObjectURL","dispatchEvent","MouseEvent","bubbles","cancelable","view","window"],"sources":["src/views/image/ImageCompress.vue"],"sourcesContent":["<template>\r\n  <div class=\"image-compress\">\r\n    <Hints>\r\n      <template slot=\"hintName\">图片压缩</template>\r\n      <template slot=\"hintInfo\">\r\n        <p>纯JS实现对图片的等比压缩和放大的功能，并对图片进行下载</p>\r\n      </template>\r\n    </Hints>\r\n    <el-row :gutter=\"20\">\r\n      <el-col :span=\"16\">\r\n        <el-card shadow=\"always\">\r\n          <div slot=\"header\" class=\"title\">图片区域</div>\r\n          <div class=\"box-wrapper\">\r\n            <div class=\"image-container\" :style=\"imageStyle\" />\r\n          </div>\r\n        </el-card>\r\n      </el-col>\r\n      <el-col :span=\"8\">\r\n        <el-card shadow=\"always\">\r\n          <div slot=\"header\" class=\"title\">设置区域</div>\r\n          <div class=\"box-content\">\r\n            <el-form label-width=\"82px\" label-position=\"left\">\r\n              <el-form-item label=\"选择图片：\">\r\n                <UploadImage class=\"select-image\" btn-name=\"选择图片\" @on-success=\"handleSuccess\" />\r\n              </el-form-item>\r\n              <el-form-item label=\"图片尺寸：\">\r\n                <div class=\"ratio-size\">\r\n                  <el-input v-model.number=\"imageObj.width\" @keyup.native=\"bindInput('h')\" />\r\n                  <i class=\"vue-dsn-icon-edit-img-size-locking icon-link\" />\r\n                  <el-input v-model.number=\"imageObj.height\" @keyup.native=\"bindInput('w')\" />\r\n                  <ul class=\"ratio-type clearfix\">\r\n                    <li>宽</li>\r\n                    <li>高</li>\r\n                  </ul>\r\n                </div>\r\n              </el-form-item>\r\n              <el-form-item label=\"压缩比例：\" class=\"item-ratio\">\r\n                <el-input v-model.number=\"imageObj.ratio\" disabled />\r\n              </el-form-item>\r\n              <el-form-item label=\"图片质量：\">\r\n                <el-select v-model=\"imageObj.quality\" placeholder=\"请选择\">\r\n                  <el-option\r\n                    v-for=\"item in qualityOptions\"\r\n                    :key=\"item.value\"\r\n                    :label=\"item.label\"\r\n                    :value=\"item.value\"\r\n                  />\r\n                </el-select>\r\n              </el-form-item>\r\n              <div>\r\n                <el-button class=\"btn-compress\" type=\"primary\" @click=\"compressImage\">压缩图片</el-button>\r\n              </div>\r\n            </el-form>\r\n          </div>\r\n        </el-card>\r\n      </el-col>\r\n    </el-row>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport Hints from '@/components/Hints'\r\nimport UploadImage from '@/components/UploadImage'\r\nimport { base64toBlob, calcImageSize } from '@/utils'\r\nconst qualityOptions = [\r\n  { label: 100, value: 1 },\r\n  { label: 90, value: 0.9 },\r\n  { label: 80, value: 0.8 },\r\n  { label: 70, value: 0.7 },\r\n  { label: 60, value: 0.6 },\r\n  { label: 50, value: 0.5 }\r\n]\r\n\r\nexport default {\r\n  name: 'ImageCompress',\r\n  components: { Hints, UploadImage },\r\n  data() {\r\n    return {\r\n      // 图片对象\r\n      image: {\r\n        width: 1920,\r\n        height: 1080,\r\n        src: 'https://cdn.jsdelivr.net/gh/baimingxuan/media-store/images/img03.jpg'\r\n      },\r\n      // 图片显示对象\r\n      imageShow: {\r\n        width: 0,\r\n        height: 0,\r\n        imgSrc: ''\r\n      },\r\n      // 图片压缩的值对象\r\n      imageObj: {\r\n        width: 0,\r\n        height: 0,\r\n        ratio: 100 + '%',\r\n        quality: 1\r\n      },\r\n      qualityOptions\r\n    }\r\n  },\r\n  computed: {\r\n    // 图片显示区样式\r\n    imageStyle() {\r\n      return {\r\n        width: this.imageShow.width + 'px',\r\n        height: this.imageShow.height + 'px',\r\n        backgroundImage: 'url(\\'' + this.imageShow.imgSrc + '\\')'\r\n      }\r\n    },\r\n    // 图片宽高比率\r\n    imageRatio() {\r\n      return this.image.width / this.image.height\r\n    }\r\n  },\r\n  watch: {\r\n    image: {\r\n      handler(val) {\r\n        this.getDragContainerSize(val.width, val.height)\r\n        this.imageShow.imgSrc = val.src\r\n        this.imageObj.width = val.width\r\n        this.imageObj.height = val.height\r\n        this.imageObj.ratio = 100 + '%'\r\n        this.imageObj.quality = 1\r\n      },\r\n      deep: true\r\n    }\r\n  },\r\n  created() {\r\n    this.getDragContainerSize(this.image.width, this.image.height)\r\n    this.imageShow.imgSrc = this.image.src\r\n    this.imageObj.width = this.image.width\r\n    this.imageObj.height = this.image.height\r\n  },\r\n  methods: {\r\n    // 输入宽高关联\r\n    bindInput(type) {\r\n      if (type === 'h') {\r\n        this.imageObj.height = Math.round(this.imageObj.width / this.imageRatio).toFixed(0)\r\n      } else if (type === 'w') {\r\n        this.imageObj.width = Math.round(this.imageObj.height * this.imageRatio).toFixed(0)\r\n      }\r\n      this.imageObj.ratio = (this.imageObj.width / this.image.width * 100).toFixed(2) + '%'\r\n    },\r\n    // 计算图片显示宽高\r\n    getDragContainerSize(imageW, imageH) {\r\n      const [showAreaW, showAreaH] = [850, 550]\r\n      const sizeObj = calcImageSize(imageW, imageH, showAreaW, showAreaH)\r\n      // 更新图片展示区宽高\r\n      this.imageShow.width = sizeObj.width\r\n      this.imageShow.height = sizeObj.height\r\n    },\r\n    handleSuccess(data) {\r\n      this.image.src = data\r\n      const image = new Image()\r\n      image.src = data\r\n      image.onload = () => {\r\n        this.image.width = image.width\r\n        this.image.height = image.height\r\n      }\r\n    },\r\n    // 图片压缩\r\n    compressImage() {\r\n      const width = this.imageObj.width\r\n      const height = this.imageObj.height\r\n      const quality = this.imageObj.quality\r\n      const img = new Image()\r\n      img.src = this.image.src\r\n      img.onload = () => {\r\n        // 创建canvas\r\n        const canvas = document.createElement('canvas')\r\n        const ctx = canvas.getContext('2d')\r\n        // 创建属性节点\r\n        const anw = document.createAttribute('width')\r\n        anw.nodeValue = width\r\n        const anh = document.createAttribute('height')\r\n        anh.nodeValue = height\r\n        canvas.setAttributeNode(anw)\r\n        canvas.setAttributeNode(anh)\r\n        // 绘制图片\r\n        ctx.fillRect(0, 0, width, height)\r\n        ctx.drawImage(img, 0, 0, width, height)\r\n        // 生成base64图片\r\n        const imageBase64 = canvas.toDataURL('image/png', quality)\r\n        this.downloadImage(imageBase64)\r\n      }\r\n    },\r\n    // 下载压缩的图片\r\n    downloadImage(imageBase64) {\r\n      const imageBlob = base64toBlob(imageBase64)\r\n      const link = document.createElement('a')\r\n      const event = document.createEvent('HTMLEvents')\r\n      // initEvent 不加后两个参数会在火狐下报错 事件类型，是否冒泡，是否阻止浏览器的默认行为\r\n      event.initEvent('click', true, true)\r\n      link.download = 'image.png'\r\n      link.href = URL.createObjectURL(imageBlob)\r\n      // 兼容火狐\r\n      link.dispatchEvent(new MouseEvent('click', { bubbles: true, cancelable: true, view: window }))\r\n    }\r\n  }\r\n}\r\n</script>\r\n\r\n<style lang=\"less\">\r\n@import \"../../assets/less/image-compress\";\r\n</style>\r\n"],"mappings":"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","ignoreList":[]}]}