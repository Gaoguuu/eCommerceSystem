{"remainingRequest":"D:\\projectWork\\thirdGrade\\econmic\\vue-admin-design\\node_modules\\babel-loader\\lib\\index.js!D:\\projectWork\\thirdGrade\\econmic\\vue-admin-design\\node_modules\\cache-loader\\dist\\cjs.js??ref--1-0!D:\\projectWork\\thirdGrade\\econmic\\vue-admin-design\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\projectWork\\thirdGrade\\econmic\\vue-admin-design\\src\\components\\UploadImage\\index.vue?vue&type=script&lang=js","dependencies":[{"path":"D:\\projectWork\\thirdGrade\\econmic\\vue-admin-design\\src\\components\\UploadImage\\index.vue","mtime":1728976157719},{"path":"D:\\projectWork\\thirdGrade\\econmic\\vue-admin-design\\babel.config.js","mtime":1728976157680},{"path":"D:\\projectWork\\thirdGrade\\econmic\\vue-admin-design\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1728977241680},{"path":"D:\\projectWork\\thirdGrade\\econmic\\vue-admin-design\\node_modules\\babel-loader\\lib\\index.js","mtime":1728977243261},{"path":"D:\\projectWork\\thirdGrade\\econmic\\vue-admin-design\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1728977241680},{"path":"D:\\projectWork\\thirdGrade\\econmic\\vue-admin-design\\node_modules\\vue-loader\\lib\\index.js","mtime":1728977244061}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:InVzZSBzdHJpY3QiOwoKT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsICJfX2VzTW9kdWxlIiwgewogIHZhbHVlOiB0cnVlCn0pOwpleHBvcnRzLmRlZmF1bHQgPSB2b2lkIDA7CnJlcXVpcmUoImNvcmUtanMvbW9kdWxlcy93ZWIudXJsLXNlYXJjaC1wYXJhbXMuZGVsZXRlLmpzIik7CnJlcXVpcmUoImNvcmUtanMvbW9kdWxlcy93ZWIudXJsLXNlYXJjaC1wYXJhbXMuaGFzLmpzIik7CnJlcXVpcmUoImNvcmUtanMvbW9kdWxlcy93ZWIudXJsLXNlYXJjaC1wYXJhbXMuc2l6ZS5qcyIpOwp2YXIgX2RlZmF1bHQgPSBleHBvcnRzLmRlZmF1bHQgPSB7CiAgbmFtZTogJ1VwbG9hZEltYWdlJywKICBwcm9wczogewogICAgYnRuTmFtZTogewogICAgICB0eXBlOiBTdHJpbmcsCiAgICAgIGRlZmF1bHQ6ICfpgInmi6nlm77niYcnCiAgICB9CiAgfSwKICBtZXRob2RzOiB7CiAgICBoYW5kbGVDaGFuZ2UoaW1hZ2UpIHsKICAgICAgY29uc3QgcmF3SW1hZ2UgPSBpbWFnZS5yYXc7CiAgICAgIGlmICghcmF3SW1hZ2UpIHJldHVybiBmYWxzZTsKICAgICAgaWYgKCF0aGlzLmlzSW1hZ2UocmF3SW1hZ2UpKSB7CiAgICAgICAgdGhpcy4kbWVzc2FnZS53YXJuaW5nKCflm77niYflj6rmlK/mjIEuanBnLCAucG5nLCAuYm1wLCAuanBlZywgLndlYnDmoLzlvI8hJyk7CiAgICAgICAgcmV0dXJuIGZhbHNlOwogICAgICB9CiAgICAgIGlmICh0aGlzLmlzTGltaXQ1TShyYXdJbWFnZSkpIHsKICAgICAgICB0aGlzLnJlYWRJbWFnZShyYXdJbWFnZSk7CiAgICAgIH0KICAgIH0sCiAgICBpc0xpbWl0NU0oaW1hZ2UpIHsKICAgICAgY29uc3QgaXNMaW1pdDVNID0gaW1hZ2Uuc2l6ZSAvIDEwMjQgLyAxMDI0IDwgNTsKICAgICAgaWYgKGlzTGltaXQ1TSkgewogICAgICAgIHJldHVybiB0cnVlOwogICAgICB9IGVsc2UgewogICAgICAgIHRoaXMuJG1lc3NhZ2Uud2FybmluZygn5LiK5Lyg55qE5Zu+54mH5aSn5bCP5LiN6IO96LaF6L+HNU0hJyk7CiAgICAgICAgcmV0dXJuIGZhbHNlOwogICAgICB9CiAgICB9LAogICAgaXNJbWFnZShpbWFnZSkgewogICAgICByZXR1cm4gL1wuKGpwZ3xwbmd8Ym1wfGpwZWd8d2VicCkkLy50ZXN0KGltYWdlLm5hbWUpOwogICAgfSwKICAgIHJlYWRJbWFnZShpbWFnZSkgewogICAgICBjb25zdCByZWFkZXIgPSBuZXcgRmlsZVJlYWRlcigpOwogICAgICByZWFkZXIub25sb2FkID0gZSA9PiB7CiAgICAgICAgbGV0IGRhdGE7CiAgICAgICAgaWYgKHR5cGVvZiBlLnRhcmdldC5yZXN1bHQgPT09ICdvYmplY3QnKSB7CiAgICAgICAgICAvLyDmiopBcnJheSBCdWZmZXLovazljJbkuLpibG9iIOWmguaenOaYr2Jhc2U2NOS4jemcgOimgQogICAgICAgICAgZGF0YSA9IHdpbmRvdy5VUkwuY3JlYXRlT2JqZWN0VVJMKG5ldyBCbG9iKFtlLnRhcmdldC5yZXN1bHRdKSk7CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgIGRhdGEgPSBlLnRhcmdldC5yZXN1bHQ7CiAgICAgICAgfQogICAgICAgIHRoaXMuJGVtaXQoJ29uLXN1Y2Nlc3MnLCBkYXRhKTsKICAgICAgfTsKICAgICAgLy8g6L2s5YyW5Li6YmFzZTY0CiAgICAgIHJlYWRlci5yZWFkQXNEYXRhVVJMKGltYWdlKTsKICAgICAgLy8g6L2s5YyW5Li6YmxvYgogICAgICAvLyByZWFkZXIucmVhZEFzQXJyYXlCdWZmZXIoaW1hZ2UpCiAgICAgIHJlYWRlci5vbmVycm9yID0gZSA9PiB7CiAgICAgICAgdGhpcy4kbWVzc2FnZS5lcnJvcign5Zu+54mH6K+75Y+W5Ye66ZSZIScpOwogICAgICB9OwogICAgICB0aGlzLiRyZWZzLnVwbG9hZEltYWdlLmNsZWFyRmlsZXMoKTsKICAgIH0KICB9Cn07"},{"version":3,"names":["name","props","btnName","type","String","default","methods","handleChange","image","rawImage","raw","isImage","$message","warning","isLimit5M","readImage","size","test","reader","FileReader","onload","e","data","target","result","window","URL","createObjectURL","Blob","$emit","readAsDataURL","onerror","error","$refs","uploadImage","clearFiles"],"sources":["src/components/UploadImage/index.vue"],"sourcesContent":["<template>\r\n  <el-upload\r\n    ref=\"uploadImage\"\r\n    class=\"upload-image-wrapper\"\r\n    action=\"\"\r\n    accept=\".jpg, .png, .bmp, .jpeg, .webp\"\r\n    :multiple=\"false\"\r\n    :show-file-list=\"false\"\r\n    :auto-upload=\"false\"\r\n    :on-change=\"handleChange\"\n  >\r\n    <el-button size=\"small\" type=\"primary\">{{ btnName }}</el-button>\r\n  </el-upload>\r\n</template>\r\n\r\n<script>\r\nexport default {\r\n  name: 'UploadImage',\r\n  props: {\r\n    btnName: {\r\n      type: String,\r\n      default: '选择图片'\r\n    }\r\n  },\r\n  methods: {\r\n    handleChange(image) {\r\n      const rawImage = image.raw\r\n      if (!rawImage) return false\r\n      if (!this.isImage(rawImage)) {\r\n        this.$message.warning('图片只支持.jpg, .png, .bmp, .jpeg, .webp格式!')\r\n        return false\r\n      }\r\n      if (this.isLimit5M(rawImage)) {\r\n        this.readImage(rawImage)\r\n      }\r\n    },\r\n    isLimit5M(image) {\r\n      const isLimit5M = image.size / 1024 / 1024 < 5\r\n      if (isLimit5M) {\r\n        return true\r\n      } else {\r\n        this.$message.warning('上传的图片大小不能超过5M!')\r\n        return false\r\n      }\r\n    },\r\n    isImage(image) {\r\n      return /\\.(jpg|png|bmp|jpeg|webp)$/.test(image.name)\r\n    },\r\n    readImage(image) {\r\n      const reader = new FileReader()\r\n      reader.onload = e => {\r\n        let data\r\n        if (typeof e.target.result === 'object') {\r\n          // 把Array Buffer转化为blob 如果是base64不需要\r\n          data = window.URL.createObjectURL(new Blob([e.target.result]))\r\n        } else {\r\n          data = e.target.result\r\n        }\r\n        this.$emit('on-success', data)\r\n      }\r\n      // 转化为base64\r\n      reader.readAsDataURL(image)\r\n      // 转化为blob\r\n      // reader.readAsArrayBuffer(image)\r\n      reader.onerror = e => {\r\n        this.$message.error('图片读取出错!')\r\n      }\r\n      this.$refs.uploadImage.clearFiles()\r\n    }\r\n  }\r\n}\r\n</script>\r\n"],"mappings":";;;;;;;;;iCAgBA;EACAA,IAAA;EACAC,KAAA;IACAC,OAAA;MACAC,IAAA,EAAAC,MAAA;MACAC,OAAA;IACA;EACA;EACAC,OAAA;IACAC,aAAAC,KAAA;MACA,MAAAC,QAAA,GAAAD,KAAA,CAAAE,GAAA;MACA,KAAAD,QAAA;MACA,UAAAE,OAAA,CAAAF,QAAA;QACA,KAAAG,QAAA,CAAAC,OAAA;QACA;MACA;MACA,SAAAC,SAAA,CAAAL,QAAA;QACA,KAAAM,SAAA,CAAAN,QAAA;MACA;IACA;IACAK,UAAAN,KAAA;MACA,MAAAM,SAAA,GAAAN,KAAA,CAAAQ,IAAA;MACA,IAAAF,SAAA;QACA;MACA;QACA,KAAAF,QAAA,CAAAC,OAAA;QACA;MACA;IACA;IACAF,QAAAH,KAAA;MACA,oCAAAS,IAAA,CAAAT,KAAA,CAAAR,IAAA;IACA;IACAe,UAAAP,KAAA;MACA,MAAAU,MAAA,OAAAC,UAAA;MACAD,MAAA,CAAAE,MAAA,GAAAC,CAAA;QACA,IAAAC,IAAA;QACA,WAAAD,CAAA,CAAAE,MAAA,CAAAC,MAAA;UACA;UACAF,IAAA,GAAAG,MAAA,CAAAC,GAAA,CAAAC,eAAA,KAAAC,IAAA,EAAAP,CAAA,CAAAE,MAAA,CAAAC,MAAA;QACA;UACAF,IAAA,GAAAD,CAAA,CAAAE,MAAA,CAAAC,MAAA;QACA;QACA,KAAAK,KAAA,eAAAP,IAAA;MACA;MACA;MACAJ,MAAA,CAAAY,aAAA,CAAAtB,KAAA;MACA;MACA;MACAU,MAAA,CAAAa,OAAA,GAAAV,CAAA;QACA,KAAAT,QAAA,CAAAoB,KAAA;MACA;MACA,KAAAC,KAAA,CAAAC,WAAA,CAAAC,UAAA;IACA;EACA;AACA","ignoreList":[]}]}